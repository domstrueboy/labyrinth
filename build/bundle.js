var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function r(t){t.forEach(n)}function o(t){return"function"==typeof t}function l(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function c(n,e,r){n.$$.on_destroy.push(function(n,...e){if(null==n)return t;const r=n.subscribe(...e);return r.unsubscribe?()=>r.unsubscribe():r}(e,r))}function u(t){return null==t?"":t}function i(t,n){t.appendChild(n)}function s(t,n,e){t.insertBefore(n,e||null)}function f(t){t.parentNode.removeChild(t)}function a(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}function d(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function h(){return p(" ")}function g(t,n,e,r){return t.addEventListener(n,e,r),()=>t.removeEventListener(n,e,r)}function $(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function m(t,n,e,r){t.style.setProperty(n,e,r?"important":"")}let y;function b(t){y=t}function v(t){(function(){if(!y)throw new Error("Function called outside component initialization");return y})().$$.on_mount.push(t)}const x=[],w=[],_=[],A=[],C=Promise.resolve();let k=!1;function L(t){_.push(t)}const E=new Set;function T(){do{for(;x.length;){const t=x.shift();b(t),M(t.$$)}for(;w.length;)w.pop()();for(let t=0;t<_.length;t+=1){const n=_[t];E.has(n)||(E.add(n),n())}_.length=0}while(x.length);for(;A.length;)A.pop()();k=!1,E.clear()}function M(t){if(null!==t.fragment){t.update(),r(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(L)}}const N=new Set;let H;function P(){H={r:0,c:[],p:H}}function j(){H.r||r(H.c),H=H.p}function q(t,n){t&&t.i&&(N.delete(t),t.i(n))}function B(t,n,e,r){if(t&&t.o){if(N.has(t))return;N.add(t),H.c.push(()=>{N.delete(t),r&&(e&&t.d(1),r())}),t.o(n)}}function I(t){t&&t.c()}function O(t,e,l){const{fragment:c,on_mount:u,on_destroy:i,after_update:s}=t.$$;c&&c.m(e,l),L(()=>{const e=u.map(n).filter(o);i?i.push(...e):r(e),t.$$.on_mount=[]}),s.forEach(L)}function S(t,n){const e=t.$$;null!==e.fragment&&(r(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function z(t,n){-1===t.$$.dirty[0]&&(x.push(t),k||(k=!0,C.then(T)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function F(n,o,l,c,u,i,s=[-1]){const f=y;b(n);const a=o.props||{},d=n.$$={fragment:null,ctx:null,props:i,update:t,not_equal:u,bound:e(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:e(),dirty:s};let p=!1;d.ctx=l?l(n,a,(t,e,...r)=>{const o=r.length?r[0]:e;return d.ctx&&u(d.ctx[t],d.ctx[t]=o)&&(d.bound[t]&&d.bound[t](o),p&&z(n,t)),e}):[],d.update(),p=!0,r(d.before_update),d.fragment=!!c&&c(d.ctx),o.target&&(o.hydrate?d.fragment&&d.fragment.l(function(t){return Array.from(t.childNodes)}(o.target)):d.fragment&&d.fragment.c(),o.intro&&q(n.$$.fragment),O(n,o.target,o.anchor),T()),b(f)}class W{$destroy(){S(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}}const D=[];function G(n,e=t){let r;const o=[];function c(t){if(l(n,t)&&(n=t,r)){const t=!D.length;for(let t=0;t<o.length;t+=1){const e=o[t];e[1](),D.push(e,n)}if(t){for(let t=0;t<D.length;t+=2)D[t][0](D[t+1]);D.length=0}}}return{set:c,update:function(t){c(t(n))},subscribe:function(l,u=t){const i=[l,u];return o.push(i),1===o.length&&(r=e(c)||t),l(n),()=>{const t=o.indexOf(i);-1!==t&&o.splice(t,1),0===o.length&&(r(),r=null)}}}}const J=G(!1),K=G([]);String.prototype.replaceAll=function(t,n){return this.split(t).join(n)};function Q(n){let e,r;return{c(){e=d("div"),$(e,"contenteditable","true"),$(e,"class","wrapper svelte-1pn1d0p"),$(e,"autofocus",""),void 0===n[1]&&L(()=>n[4].call(e))},m(t,o){s(t,e,o),n[3](e),void 0!==n[1]&&(e.innerHTML=n[1]),e.focus(),r=g(e,"input",n[4])},p(t,[n]){2&n&&t[1]!==e.innerHTML&&(e.innerHTML=t[1])},i:t,o:t,d(t){t&&f(e),n[3](null),r()}}}function R(t,n,e){let r,o,l;return c(t,J,t=>e(2,r=t)),t.$$.update=()=>{if(5&t.$$.dirty&&r){const t=o.innerHTML.replaceAll(/&nbsp;/gi,"").replaceAll("</div><div>",";").replaceAll("<div>",";").replaceAll("</div>","").replaceAll("<br>","delimeter").trim().split(";").map(t=>t.trim()).filter(t=>""!==t),n=t.reduce((t,n)=>{if("delimeter"===n)return t.push(n),t;const e=n.split(" ").filter(t=>""!==t),r=e[0].toLowerCase(),o=parseInt(e[1],10);return isNaN(o)?t:(["влево","left"].includes(r)?t.push(["left",o]):["вправо","right"].includes(r)?t.push(["right",o]):["вверх","up"].includes(r)?t.push(["up",o]):["вниз","down"].includes(r)?t.push(["down",o]):["повтор","повторить","repeat"].includes(r)&&t.push(["repeat",o]),t)},[]);console.log(n);const e=function(t){const n=t.length,e=[];let r=0;for(;r<n&&r<1e3;){const n=t[r];if(Array.isArray(n)){const o=n[0],l=n[1];if("repeat"===o){t[r+1]}for(let t=0;t<l;t++)e.push(o)}r++}return e}(n);console.log(e),K.set(e)}},[o,l,r,function(t){w[t?"unshift":"push"](()=>{e(0,o=t)})},function(){l=this.innerHTML,e(1,l)}]}class U extends W{constructor(t){super(),F(this,t,R,Q,l,{})}}function V(n){let e,r;return{c(){e=d("div"),$(e,"class",r=u(n[3][n[0]])+" svelte-1qgnwu1"),m(e,"--height",n[2])},m(t,r){s(t,e,r),n[4](e)},p(t,[n]){1&n&&r!==(r=u(t[3][t[0]])+" svelte-1qgnwu1")&&$(e,"class",r),4&n&&m(e,"--height",t[2])},i:t,o:t,d(t){t&&f(e),n[4](null)}}}function X(t,n,e){let r,o,{cellCode:l}=n;return v(()=>{e(2,o=r.offsetWidth+"px")}),t.$set=t=>{"cellCode"in t&&e(0,l=t.cellCode)},[l,r,o,["none","path","start","finish"],function(t){w[t?"unshift":"push"](()=>{e(1,r=t)})}]}class Y extends W{constructor(t){super(),F(this,t,X,V,l,{cellCode:0})}}function Z(t,n,e){return!(n<0||e<0)&&(!(n>=t[0].length||e>=t.length)&&0!==t[e][n])}function tt(t,n,e){return 3===t[e][n]}function nt(t,n,e){const r=t.slice();return r[12]=n[e],r[14]=e,r}function et(t,n,e){const r=t.slice();return r[9]=n[e],r[11]=e,r}function rt(n){let e;const r=new Y({props:{cellCode:n[12]}});return{c(){I(r.$$.fragment)},m(t,n){O(r,t,n),e=!0},p:t,i(t){e||(q(r.$$.fragment,t),e=!0)},o(t){B(r.$$.fragment,t),e=!1},d(t){S(r,t)}}}function ot(t){let n,e,r=t[9],o=[];for(let n=0;n<r.length;n+=1)o[n]=rt(nt(t,r,n));const l=t=>B(o[t],1,1,()=>{o[t]=null});return{c(){for(let t=0;t<o.length;t+=1)o[t].c();n=p("")},m(t,r){for(let n=0;n<o.length;n+=1)o[n].m(t,r);s(t,n,r),e=!0},p(t,e){if(4&e){let c;for(r=t[9],c=0;c<r.length;c+=1){const l=nt(t,r,c);o[c]?(o[c].p(l,e),q(o[c],1)):(o[c]=rt(l),o[c].c(),q(o[c],1),o[c].m(n.parentNode,n))}for(P(),c=r.length;c<o.length;c+=1)l(c);j()}},i(t){if(!e){for(let t=0;t<r.length;t+=1)q(o[t]);e=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)B(o[t]);e=!1},d(t){a(o,t),t&&f(n)}}}function lt(t){let n,e,r,o,l=t[2],c=[];for(let n=0;n<l.length;n+=1)c[n]=ot(et(t,l,n));const u=t=>B(c[t],1,1,()=>{c[t]=null});return{c(){n=d("div");for(let t=0;t<c.length;t+=1)c[t].c();e=h(),r=d("div"),$(r,"class","chip svelte-l6o0f2"),m(r,"--pos-x",t[0]),m(r,"--pos-y",t[1]),$(n,"class","wrapper svelte-l6o0f2"),m(n,"--rows",t[3]),m(n,"--columns",t[4])},m(t,l){s(t,n,l);for(let t=0;t<c.length;t+=1)c[t].m(n,null);i(n,e),i(n,r),o=!0},p(t,[i]){if(4&i){let r;for(l=t[2],r=0;r<l.length;r+=1){const o=et(t,l,r);c[r]?(c[r].p(o,i),q(c[r],1)):(c[r]=ot(o),c[r].c(),q(c[r],1),c[r].m(n,e))}for(P(),r=l.length;r<c.length;r+=1)u(r);j()}(!o||1&i)&&m(r,"--pos-x",t[0]),(!o||2&i)&&m(r,"--pos-y",t[1])},i(t){if(!o){for(let t=0;t<l.length;t+=1)q(c[t]);o=!0}},o(t){c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)B(c[t]);o=!1},d(t){t&&f(n),a(c,t)}}}function ct(t,n,e){let r;c(t,K,t=>e(7,r=t));let o,l,u=[[0,0,0,1,3],[0,0,1,1,0],[1,1,1,0,0],[1,0,0,0,0],[1,1,0,0,0],[0,1,1,0,0],[0,0,1,1,2]],i=u.length,s=u[0].length,f=u.findIndex(t=>t.includes(2)),a=u[f].findIndex(t=>2===t);return t.$$.update=()=>{64&t.$$.dirty&&e(0,o=a+1),32&t.$$.dirty&&e(1,l=f+1),128&t.$$.dirty&&r.length>0&&r.reduce((t,n)=>t.then(()=>function(t){return new Promise((n,r)=>{setTimeout(()=>{let r,o;switch(t){case"left":r=a-1,Z(u,r,f)?(e(6,a-=1),tt(u,a,f)&&alert("Победа!")):alert("Вы вышли за пределы поля!");break;case"right":r=a+1,Z(u,r,f)?(e(6,a+=1),tt(u,a,f)&&alert("Победа!")):alert("Вы вышли за пределы поля!");break;case"up":o=f-1,Z(u,a,o)?(e(5,f-=1),tt(u,a,f)&&alert("Победа!")):alert("Вы вышли за пределы поля!");break;case"down":o=f+1,Z(u,a,o)?(e(5,f+=1),tt(u,a,f)&&alert("Победа!")):alert("Вы вышли за пределы поля!")}n()},500)})}(n)),Promise.resolve())},[o,l,u,i,s]}class ut extends W{constructor(t){super(),F(this,t,ct,lt,l,{})}}function it(n){let e,r;return{c(){e=d("button"),e.textContent="СТАРТ",$(e,"class","svelte-1oydbdt")},m(t,n){s(t,e,n),r=g(e,"click",st)},p:t,i:t,o:t,d(t){t&&f(e),r()}}}function st(){J.set(!0)}class ft extends W{constructor(t){super(),F(this,t,null,it,l,{})}}function at(n){let e,r,o,l;const c=new U({}),u=new ut({}),a=new ft({});return{c(){e=d("main"),I(c.$$.fragment),r=h(),I(u.$$.fragment),o=h(),I(a.$$.fragment),$(e,"class","svelte-1r6xykg")},m(t,n){s(t,e,n),O(c,e,null),i(e,r),O(u,e,null),i(e,o),O(a,e,null),l=!0},p:t,i(t){l||(q(c.$$.fragment,t),q(u.$$.fragment,t),q(a.$$.fragment,t),l=!0)},o(t){B(c.$$.fragment,t),B(u.$$.fragment,t),B(a.$$.fragment,t),l=!1},d(t){t&&f(e),S(c),S(u),S(a)}}}return new class extends W{constructor(t){super(),F(this,t,null,at,l,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
