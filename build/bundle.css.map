{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../../App.svelte",
    "../../Editor.svelte",
    "../../Labyrinth.svelte",
    "../../MainButton.svelte",
    "../../Alert.svelte",
    "../../Cell.svelte"
  ],
  "sourcesContent": [
    "<script>\n\timport Editor from './components/Editor.svelte';\n\timport Labyrinth from './components/Labyrinth.svelte';\n\timport MainButton from './components/MainButton.svelte';\n\timport Alert from './components/Alert.svelte';\n\n\timport { win, level } from './stores.js';\n\t\n\tfunction handleClick() {\n\t\tlevel.set($level + 1);\n\t\twin.set(false);\n\t}\n\t\n\t$: document.title = `Уровень ${$level}`;\n</script>\n\n<main>\n\t<Editor />\n\t<Labyrinth />\n\t<MainButton />\n\n\t<!-- {#if $win} -->\n\t\t<Alert>\n\t\t\t<h1>Победа!</h1>\n\t\t\t<button on:click={handleClick} title=\"Retry\">\n\t\t\t\t<img src=\"img/icons/refresh-24px.svg\" alt=\"\">\n\t\t\t</button>\n\t\t\t<button on:click={handleClick} title=\"Next\">\n\t\t\t\t<img src=\"img/icons/redo-24px.svg\" alt=\"\">\n\t\t\t</button>\n\t\t</Alert>\n\t<!-- {/if} -->\n</main>\n\n<style>\n\tmain {\n\t\theight: 100vh;\n\t\twidth: 100vw;\n\t\tdisplay: flex;\n\t\tposition: relative;\n\t}\n</style>",
    "<script>\n  import { isAppStarted, commands } from '../stores.js';\n  import parser from '../functions/parser.js';\n  import lexer from '../functions/lexer.js';\n  import runner from '../functions/runner.js';\n\n  let editor;\n  let content;\n  \n  $: if ($isAppStarted) {\n    const parsed = parser(editor.innerHTML);\n    const lexed = lexer(parsed);\n    console.log(lexed);\n    const separateCommands = runner(lexed);\n    console.log(separateCommands);\n    commands.set(separateCommands);\n  }\n\n  // $: console.log('input handling (lint, suggestions, etc)', content);\n</script>\n\n<div\n  bind:this={editor}\n  bind:innerHTML={content}\n  contenteditable=\"true\"\n  class=\"wrapper\"\n  autofocus\n>\n</div>\n\n<style>\n  .wrapper {\n    box-sizing: border-box;\n    width: 50vw;\n    height: 100vh;\n    overflow: auto;\n    background: rgb(45, 45, 45);\n    padding: 8px;\n    font-size: 24px;\n    font-family: 'Anonymous Pro', monospace;\n    font-weight: bold;\n    color: whitesmoke;\n    outline: none;\n  }\n</style>",
    "<script>\n  import Cell from './Cell.svelte';\n  import { commands, win, level } from '../stores.js';\n\n  import checkIfInField from '../functions/checkIfInField.js';\n  import checkIfWin from '../functions/checkIfWin.js';\n\n  import { onMount } from 'svelte';\n\n  let grid = [\n    [2, 1],\n    [1, 3],\n  ];\n\n  let rows = grid.length;\n  let cols = grid[0].length;\n\n  let w, h;\n\n  let indexY = 0;\n  let indexX = 0;\n\n  let posX, posY;\n\n  onMount(() => loadLevel($level));\n\n  $: posX = indexX + 1;\n  $: posY = indexY + 1;\n  $: size = Math.min(w / cols, h / rows) - 4 + 'px';\n  $: loadLevel($level).catch((err) => {\n    level.set(1);\n    loadLevel($level);\n  });\n\n  async function loadLevel(level) {\n    grid = (await import(`../levels/level${level}.js`)).default;\n\n    rows = grid.length;\n    cols = grid[0].length;\n\n    indexY = grid.findIndex(row => row.includes(2));\n    indexX = grid[indexY].findIndex(col => col === 2);\n  }\n\n  function methodThatReturnsAPromise(command) {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        let newX, newY;\n        switch (command) {\n          case 'left':\n            newX = indexX - 1;\n            if (checkIfInField(grid, newX, indexY)) {\n              indexX -= 1;\n              if (checkIfWin(grid, indexX, indexY)) {\n                win.set(true);\n              }\n            } else {\n              alert('Вы вышли за пределы поля!');\n            }\n            break;\n          case 'right':\n            newX = indexX + 1;\n            if (checkIfInField(grid, newX, indexY)) {\n              indexX += 1;\n              if (checkIfWin(grid, indexX, indexY)) {\n                win.set(true);\n              }\n            } else {\n              alert('Вы вышли за пределы поля!');\n            }\n            break;\n          case 'up':\n            newY = indexY - 1;\n            if (checkIfInField(grid, indexX, newY)) {\n              indexY -= 1;\n              if (checkIfWin(grid, indexX, indexY)) {\n                win.set(true);\n              }\n            } else {\n              alert('Вы вышли за пределы поля!');\n            }\n            break;\n          case 'down':\n            newY = indexY + 1;\n            if (checkIfInField(grid, indexX, newY)) {\n              indexY += 1;\n              if (checkIfWin(grid, indexX, indexY)) {\n                win.set(true);\n              }\n            } else {\n              alert('Вы вышли за пределы поля!');\n            }\n            break;\n        }\n        resolve();\n      }, 500);\n    });\n  }\n\n  $: if ($commands.length > 0) {\n    $commands.reduce((accumulatorPromise, command) => {\n      return accumulatorPromise.then(() => {\n        return methodThatReturnsAPromise(command);\n      });\n    }, Promise.resolve());\n  }\n</script>\n\n<div\n  class=\"wrapper\"\n  style=\"--rows:{rows}; --columns:{cols}; --size:{size}\"\n>\n  <div\n    class=\"field\"\n    bind:clientWidth={w}\n    bind:clientHeight={h}\n  >\n    {#each grid as row, y}\n      {#each row as cellCode, x}\n        <Cell {cellCode} size={size} />\n      {/each}\n    {/each}\n    <div\n      class=\"chip\"\n      style=\"--pos-x:{posX};--pos-y:{posY}\"\n    >\n    </div>\n  </div>\n</div>\n\n<style>\n  .wrapper {\n    flex: 1;\n    box-sizing: border-box;\n    width: 50vw;\n    padding: 6px 6px 8px 8px;\n  }\n  .field {\n    width: 100%;\n    height: 100%;\n    max-height: 100vh;\n    display: grid;\n    justify-content: center;\n    align-content: center;\n    grid-template-rows: repeat(var(--rows), var(--size));\n    grid-template-columns: repeat(var(--columns), var(--size));\n    grid-column-gap: 2px;\n    grid-row-gap: 2px;\n    position: relative;\n    background: whitesmoke;\n    padding: 8px;\n    box-sizing: border-box;\n  }\n  .chip {\n    position: absolute;\n    grid-column-start: var(--pos-x);\n    grid-column-end: var(--pos-x);\n    grid-row-start: var(--pos-y);\n    grid-row-end: var(--pos-y);\n    width: 80%;\n    height: 80%;\n    background: rgb(45, 45, 45);\n    border-radius: 50%;\n    margin-left: 10%;\n    margin-top: 10%;\n  }\n</style>",
    "<script>\n  import { isAppStarted } from '../stores.js';\n\n  function handleClick() {\n    isAppStarted.set(true);\n  }\n</script>\n\n<button on:click={handleClick} title=\"START\">\n  <img src=\"img/icons/play_arrow-24px.svg\" alt=\"START\">\n</button>\n\n<style>\n  button {\n    position: absolute;\n    bottom: 13px;\n    left: 10px;\n    cursor: pointer;\n    margin: 0;\n    font-size: 32px;\n    font-weight: 200;\n    box-shadow: 4px 4px 4px gray;\n    border: 0;\n    background: white;\n  }\n  button:active {\n    box-shadow: 2px 2px 2px gray;\n    background: white;\n  }\n</style>",
    "<script>\n  // import { isAppStarted } from '../stores.js';\n\n  // function handleClick() {\n  //   isAppStarted.set(true);\n  // }\n</script>\n\n<!-- <button on:click={handleClick}>СТАРТ</button> -->\n<div class=\"overlay\">\n  <div class=\"window\">\n    <slot></slot>\n  </div>\n</div>\n\n<style>\n.overlay {\n  position: absolute;\n  width: 100vw;\n  height: 100vh;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.window {\n  min-width: 320px;\n  min-height: 240px;\n  background: whitesmoke;\n  padding: 20px;\n  border-radius: 20px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n</style>",
    "<script>\n  export let cellCode;\n  export let size;\n\n  let cell;\n\n  let cellTypeByCode = ['none', 'path', 'start', 'finish'];\n</script>\n\n<div\n  class=\"{cellTypeByCode[cellCode]}\"\n  bind:this={cell}\n  style=\"--size:{size}\"\n>\n</div>\n\n<style>\n  div {\n    width: var(--size);\n    height: var(--size);\n    border-radius: 20px;\n  }\n  .path {\n    background: plum;\n  }\n  .start {\n    background: peru;\n  }\n  .finish {\n    background: orangered;\n  }\n</style>"
  ],
  "names": [],
  "mappings": "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"
}