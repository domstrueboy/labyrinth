{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../../App.svelte",
    "../../Editor.svelte",
    "../../Labyrinth.svelte",
    "../../Button.svelte",
    "../../Alert.svelte",
    "../../WinWindow.svelte",
    "../../LoseWindow.svelte",
    "../../Cell.svelte"
  ],
  "sourcesContent": [
    "<script>\n\timport Editor from './components/Editor.svelte';\n\timport Labyrinth from './components/Labyrinth.svelte';\n\timport Button from './components/Button.svelte';\n\timport Alert from './components/Alert.svelte';\n\timport WinWindow from './components/WinWindow.svelte';\n\timport LoseWindow from './components/LoseWindow.svelte';\n\n\timport { level, status } from './stores.js';\n\n\tfunction startHandler() {\n    status.set('started');\n  }\n\t\n\tfunction nextHandler() {\n\t\tlevel.set($level + 1);\n\t\tstatus.set(null);\n\t}\n\n\tfunction retryHandler() {\n\t\tstatus.set(null);\n\t}\n\t\n\t$: document.title = `Уровень ${$level}`;\n</script>\n\n<main>\n\t<Editor />\n\t<Labyrinth />\n\t<div class=\"start-button\">\n\t\t<Button title=\"Старт\" icon=\"/img/icons/play_arrow-24px.svg\" handler={startHandler} disabled={$status === 'started'} />\n\t</div>\n\n\t{#if $status === 'win'}\n\t\t<Alert>\n\t\t\t<WinWindow {nextHandler} {retryHandler} />\n\t\t</Alert>\n\t{:else if $status === 'lose'}\n\t\t<Alert>\n\t\t\t<LoseWindow {retryHandler} />\n\t\t</Alert>\n\t{/if}\n</main>\n\n<style>\n\tmain {\n\t\theight: 100vh;\n\t\twidth: 100vw;\n\t\tdisplay: flex;\n\t\tposition: relative;\n\t}\n\t.start-button {\n\t\tposition: absolute;\n    bottom: 13px;\n    left: 10px;\n\t}\n</style>",
    "<script>\n  import { content, commands, status } from '../stores.js';\n  import parser from '../functions/parser.js';\n  import lexer from '../functions/lexer.js';\n  import runner from '../functions/runner.js';\n\n  let editor;\n  \n  $: if ($status === 'started') {\n    const parsed = parser($content);\n    // console.log(parsed);\n    const lexed = lexer(parsed);\n    // console.log(lexed);\n    const separateCommands = runner(lexed);\n    // console.log(separateCommands);\n    commands.set(separateCommands);\n  }\n</script>\n\n<div\n  bind:this={editor}\n  bind:innerHTML={$content}\n  contenteditable=\"true\"\n  class=\"wrapper\"\n  autofocus\n>\n</div>\n\n<style>\n  .wrapper {\n    box-sizing: border-box;\n    width: 50vw;\n    height: 100vh;\n    overflow: auto;\n    background: rgb(45, 45, 45);\n    padding: 8px;\n    font-size: 24px;\n    font-family: 'Anonymous Pro', monospace;\n    font-weight: bold;\n    color: whitesmoke;\n    outline: none;\n  }\n</style>",
    "<script>\n  import Cell from \"./Cell.svelte\";\n  import { content, commands, level, status } from \"../stores.js\";\n\n  import checkIfInField from \"../functions/checkIfInField.js\";\n  import checkIfWin from \"../functions/checkIfWin.js\";\n\n  import { onMount } from \"svelte\";\n\n  let grid = [[2, 1], [1, 3]];\n\n  let rows = grid.length;\n  let cols = grid[0].length;\n\n  let w, h;\n\n  let indexY = 0;\n  let indexX = 0;\n\n  let posX, posY;\n\n  onMount(() => loadLevel($level));\n\n  $: posX = indexX + 1;\n  $: posY = indexY + 1;\n  $: size = Math.min(w / cols, h / rows) - 4 + \"px\";\n  $: if ($status === null) {\n    loadLevel($level).catch(err => {\n      level.set(1);\n      loadLevel($level);\n    });\n  }\n\n  async function loadLevel(level) {\n    grid = (await import(`../levels/level${level}.js`)).default;\n\n    // reset everything in the store\n    content.set(\"\");\n    commands.set([]);\n    status.set(null);\n\n    rows = grid.length;\n    cols = grid[0].length;\n\n    indexY = grid.findIndex(row => row.includes(2));\n    indexX = grid[indexY].findIndex(col => col === 2);\n  }\n\n  function methodThatReturnsAPromise(command, i) {\n    return new Promise((resolve) => {\n      if ($status === 'win' || $status === 'lose') {\n        resolve();\n        return;\n      }\n      switch (command) {\n        case 'left':\n          indexX--; break;\n        case 'right':\n          indexX++; break;\n        case 'up':\n          indexY--; break;\n        case 'down':\n          indexY++; break;\n      }\n      setTimeout(() => {\n        if (checkIfInField(grid, indexX, indexY)) {\n          if (checkIfWin(grid, indexX, indexY)) {\n            status.set('win');\n          }\n        } else {\n          status.set('lose');\n        }\n        resolve();\n      }, 500);\n    });\n  }\n\n  $: if ($commands.length > 0) {\n    status.set('started');\n    $commands.reduce((accumulatorPromise, command, index) => {\n      return accumulatorPromise.then(() => methodThatReturnsAPromise(command, index));\n    }, Promise.resolve());\n  }\n</script>\n\n<style>\n  .wrapper {\n    flex: 1;\n    box-sizing: border-box;\n    width: 50vw;\n    padding: 6px 6px 8px 8px;\n  }\n  .field {\n    width: 100%;\n    height: 100%;\n    max-height: 100vh;\n    display: grid;\n    justify-content: center;\n    align-content: center;\n    grid-template-rows: repeat(var(--rows), var(--size));\n    grid-template-columns: repeat(var(--columns), var(--size));\n    grid-column-gap: 2px;\n    grid-row-gap: 2px;\n    position: relative;\n    background: whitesmoke;\n    padding: 8px;\n    box-sizing: border-box;\n  }\n  .chip {\n    position: absolute;\n    grid-column-start: var(--pos-x);\n    grid-column-end: var(--pos-x);\n    grid-row-start: var(--pos-y);\n    grid-row-end: var(--pos-y);\n    width: 80%;\n    height: 80%;\n    background: rgb(45, 45, 45);\n    border-radius: 50%;\n    margin-left: 10%;\n    margin-top: 10%;\n  }\n</style>\n\n<div class=\"wrapper\" style=\"--rows:{rows}; --columns:{cols}; --size:{size}\">\n  <div class=\"field\" bind:clientWidth={w} bind:clientHeight={h}>\n    {#each grid as row, y}\n      {#each row as cellCode, x}\n        <Cell {cellCode} {size} />\n      {/each}\n    {/each}\n    <div class=\"chip\" style=\"--pos-x:{posX};--pos-y:{posY}\" />\n  </div>\n</div>\n",
    "<script>\n  export let title;\n  export let icon;\n  export let handler;\n  export let disabled = false;\n</script>\n\n<style>\n  button {\n    margin: 0;\n    width: 100px;\n    height: 100px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    border-radius: 50%;\n    box-shadow: 4px 4px 4px rgba(1, 1, 1, .3);\n    cursor: pointer;\n  }\n  button:active {\n    box-shadow: 2px 2px 2px rgba(1, 1, 1, .3);\n    background: whitesmoke;\n  }\n  button:disabled {\n    opacity: .3;\n  }\n  img {\n    display: block;\n    width: 60px;\n    height: 60px;\n  }\n</style>\n\n<button {title} on:click={handler} {disabled}>\n  <img src={icon} alt=\"\" />\n</button>\n",
    "<div class=\"overlay\">\n  <div class=\"window\">\n    <slot></slot>\n  </div>\n</div>\n\n<style>\n.overlay {\n  position: absolute;\n  width: 100vw;\n  height: 100vh;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.window {\n  min-width: 320px;\n  min-height: 240px;\n  background: whitesmoke;\n  padding: 20px;\n  border-radius: 20px;\n  display: flex;\n  flex-wrap: wrap;\n  align-content: space-between;\n  justify-content: space-between;\n  box-shadow: 4px 4px 4px rgba(1, 1, 1, .3);\n}\n</style>",
    "<script>\n  import Button from './Button.svelte';\n\n  export let nextHandler;\n  export let retryHandler;\n</script>\n\n<style>\n  h1 {\n    width: 100%;\n    text-align: center;\n  }\n</style>\n\n\n<h1>Победа!</h1>\n<Button title=\"Заново\" icon=\"img/icons/refresh-24px.svg\" handler={retryHandler} />\n<Button title=\"Дальше\" icon=\"img/icons/redo-24px.svg\" handler={nextHandler} />\n",
    "<script>\n  import Button from './Button.svelte';\n\n  export let retryHandler;\n</script>\n\n<style>\n  h1 {\n    width: 100%;\n    text-align: center;\n  }\n</style>\n\n\n<h1>Ты свалилась с дорожки!</h1>\n<Button title=\"Заново\" icon=\"img/icons/refresh-24px.svg\" handler={retryHandler} />\n",
    "<script>\n  export let cellCode;\n  export let size;\n\n  let cell;\n\n  let cellTypeByCode = ['none', 'path', 'start', 'finish'];\n</script>\n\n<div\n  class=\"{cellTypeByCode[cellCode]}\"\n  bind:this={cell}\n  style=\"--size:{size}\"\n>\n</div>\n\n<style>\n  div {\n    width: var(--size);\n    height: var(--size);\n    border-radius: 20px;\n  }\n  .path {\n    background: plum;\n  }\n  .start {\n    background: peru;\n  }\n  .finish {\n    background: orangered;\n  }\n</style>"
  ],
  "names": [],
  "mappings": "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"
}